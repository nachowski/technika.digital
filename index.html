<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Technika Digital - We solve hard problems.">
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Technika Digital">
  <meta property="og:description" content="We solve hard problems.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://technika.digital">
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Technika Digital">
  <meta name="twitter:description" content="We solve hard problems.">
  
  <title>technika</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Doto:wght@100..900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" loading="lazy">
  <style>
    /* Base styles */
    html, body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: #000f0c;
      color: #f5f5f0;
      font-family: 'Inter', sans-serif;
      font-weight: 300;
      line-height: 1.6;
    }

    /* Fullscreen canvas fixed at the back */
    #bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: block;
      background: #000f0c;
      pointer-events: none;
      z-index: 1;
    }

    /* Container for content */
    .container {
      position: relative;
      z-index: 2;
      max-width: 760px;
      margin: 0 auto;
      padding: 2.5rem 2rem;
    }

    /* Header styles */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 3rem;
    }

    h1 {
      font-size: 2rem;
      margin: 0;
      font-family: "Doto", sans-serif;
      font-optical-sizing: auto;
      font-weight: 400;
      font-style: normal;
      font-variation-settings: "ROND" 0;
      color: #096754;
      letter-spacing: 1px;
      text-transform: lowercase;
    }

    /* Main content styles */
    .quote {
      font-style: italic;
      font-size: 1.25rem;
      color: #ccd0cc;
      margin-bottom: 2.5rem;
      max-width: 600px;
      line-height: 1.8;
    }

    .quote-author {
      display: block;
      font-style: normal;
      font-size: 0.9rem;
      margin-top: 0.35rem;
      color: #a0a5a3;
    }

    h2 {
      font-size: 1.5rem;
      margin: 2rem 0 0.6rem 0;
      font-family: "Doto", sans-serif;
      font-optical-sizing: auto;
      font-weight: 400;
      font-style: normal;
      font-variation-settings: "ROND" 0;
      color: #096754;
    }

    p {
      margin-bottom: 1.5rem;
      color: #f0f0e8; 
      font-size: 1.1rem;
      line-height: 1.8;
    }

    /* CTA section */
    .cta {
      margin: 0.6rem 0 1.5rem;
    }

    .button {
      display: inline-block;
      background: #095144;
      color: #f5f5f0;
      padding: 1rem 2rem;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 600;
      letter-spacing: 0.5px;
      transition: all 0.3s ease;
    }

    .button:hover {
      background: #096754;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(9, 81, 68, 0.3);
    }

    /* Footer */
    footer {
      margin-top: 5rem;
      padding-top: 2rem;
      border-top: 1px solid #022822;
      font-size: 0.9rem;
      color: #a0a5a3;
    }

    @media (max-width: 768px) {
      .container {
        padding: 2rem 1.5rem;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .quote {
        font-size: 1.1rem;
        margin-bottom: 2.5rem;
      }
      
      h2 {
        font-size: 1.3rem;
        margin: 2rem 0 0.6rem 0;
      }
      
      p {
        font-size: 1rem;
        margin-bottom: 1.5rem;
      }
      
      .cta {
        margin: 0.6rem 0 1.5rem;
      }
      
      .button {
        padding: 0.9rem 1.8rem;
      }
    }
  </style>
</head>
<body>

<canvas id="bg" aria-hidden="true"></canvas>

<div class="container" role="main">
  <header>
    <h1 aria-label="Technika Digital">technika</h1>
  </header>

  <main>
    <div class="quote">
      "The future is already here, it's just not evenly distributed."
      <span class="quote-author">—William Gibson</span>
    </div>

    <h2>We solve hard problems.</h2>
    <p>The future isn't just about building more software, it's about making better use of technology. We embrace pragmatic solutions that work.</p>

    <h2>Let's get to work.</h2>
    <div class="cta">
      <a href="#" id="contact-button" class="button" aria-label="Get in touch">Get in touch</a>
    </div>
  </main>

  <footer>
    Technika Digital © <span id="current-year">2025</span>.
  </footer>
</div>

<!-- Load Three.js from CDN -->
<script type="module">
  // Check for WebGL support
  function checkWebGLSupport() {
    if (window.WebGLRenderingContext) {
      const canvas = document.createElement('canvas');
      let context = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
      if (context) {
        return true;
      }
    }
    return false;
  }

  // Main animation setup
  document.addEventListener('DOMContentLoaded', () => {
    if (!checkWebGLSupport()) {
      console.log('WebGL not supported - hiding animation');
      document.getElementById('bg').style.display = 'none';
      document.body.style.background = '#000f0c'; // Keep the background color
      return;
    }
    
    // Dynamically import Three.js with CSP integrity
    import('https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.module.js')
      .then((THREE) => {
        initAnimation(THREE);
      })
      .catch(error => {
        console.error('Failed to load Three.js:', error);
        document.getElementById('bg').style.display = 'none';
      });
  });

  // Performance-optimized animation
  function initAnimation(THREE) {
    let scene, camera, renderer;
    let linesGroup;
    const isMobile = window.innerWidth < 768;
    const lineCount = isMobile ? 20 : 40; // Fewer lines on mobile
    const maxRange = 15;

    try {
      // Get canvas element
      const canvas = document.getElementById('bg');
      if (!canvas) {
        return;
      }

      // Create scene
      scene = new THREE.Scene();

      // Create camera
      camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.z = 25;

      // Create renderer with optimized settings
      renderer = new THREE.WebGLRenderer({
        canvas: canvas,
        antialias: isMobile ? false : true, // Disable antialiasing on mobile
        powerPreference: 'high-performance'
      });
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); // Limit pixel ratio for performance
      renderer.setSize(window.innerWidth, window.innerHeight);

      // Create a group of random lines
      linesGroup = new THREE.Group();
      scene.add(linesGroup);

      // Reusable geometry for better performance
      const points = new Array(lineCount);
      
      for (let i = 0; i < lineCount; i++) {
        const material = new THREE.LineBasicMaterial({
          color: 0x095144,
          transparent: true,
          opacity: 0.3
        });
        
        const x1 = THREE.MathUtils.randFloatSpread(maxRange);
        const y1 = THREE.MathUtils.randFloatSpread(maxRange);
        const z1 = THREE.MathUtils.randFloatSpread(maxRange);
        const x2 = THREE.MathUtils.randFloatSpread(maxRange);
        const y2 = THREE.MathUtils.randFloatSpread(maxRange);
        const z2 = THREE.MathUtils.randFloatSpread(maxRange);

        points[i] = [
          new THREE.Vector3(x1, y1, z1),
          new THREE.Vector3(x2, y2, z2)
        ];
        
        const geometry = new THREE.BufferGeometry().setFromPoints(points[i]);
        const line = new THREE.Line(geometry, material);

        line.userData.offset = Math.random() * Math.PI * 2; // For unique fade
        linesGroup.add(line);
      }

      // Efficient resize handler
      let resizeTimeout;
      function onWindowResize() {
        // Debounce resize event
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        }, 250);
      }
      
      window.addEventListener('resize', onWindowResize);

      // Initial render
      renderer.render(scene, camera);

      // Throttled animation for better performance
      let lastTime = 0;
      const frameInterval = isMobile ? 32 : 16; // Limit to ~30fps on mobile, ~60fps on desktop
      
      function animate(currentTime) {
        requestAnimationFrame(animate);
        
        // Throttle based on device capability
        const deltaTime = currentTime - lastTime;
        if (deltaTime < frameInterval) return;
        lastTime = currentTime - (deltaTime % frameInterval);
        
        // Only run animation if tab is visible
        if (document.hidden) return;

        linesGroup.rotation.y += 0.0012;
        linesGroup.rotation.x += 0.0006;

        // Use fewer calculations for opacity
        linesGroup.children.forEach(line => {
          const mat = line.material;
          const offset = line.userData.offset;
          // Simplified opacity calculation
          mat.opacity = 0.3 + 0.3 * Math.sin(0.001 * currentTime + offset);
        });

        renderer.render(scene, camera);
      }
      
      animate(0);
    } catch (error) {
      console.error('Error in WebGL initialization:', error);
      document.getElementById('bg').style.display = 'none';
    }
  }

  // Email protection script
  document.addEventListener('DOMContentLoaded', () => {
    // Set current year in footer
    const yearElement = document.getElementById('current-year');
    if (yearElement) {
      yearElement.textContent = new Date().getFullYear();
    }
    
    // Handle contact button click
    const contactButton = document.getElementById('contact-button');
    if (contactButton) {
      contactButton.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Obfuscated email - reconstructed at runtime to avoid scraping
        const parts = ['contact', '@', 'technika', '.', 'digital'];
        const subject = encodeURIComponent('Technical Challenge Discussion');
        const body = encodeURIComponent(
          'Hello,\n\n' +
          'I\'d like to discuss a technical challenge.\n\n' +
          'Brief description of challenge:\n\n' +
          'Best times to connect:\n\n' +
          'Thank you,'
        );
        
        const email = parts.join('');
        window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
      });
    }
  });
</script>

</body>
</html>
